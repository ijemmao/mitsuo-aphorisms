<!DOCTYPE html>
<html>

<head>
  <meta charset=utf-8>
  <title>My first three.js app</title>
  <style>
    body {
      margin: 0;
      background-color: #ffffff;
      font-family: 'Avenir';
      user-select: none;
    }

    canvas {
      width: 100%;
      height: 100%
    }

    .aphorisms-container {
      position: absolute;
      color: white;
    }

    ul {
      list-style: none;
    }

    li {
      cursor: pointer;
      width: fit-content;
    }

    li:hover {
      color: #ed7737;
      color: rgb(101, 201, 255);
    }
  </style>
</head>

<body>
  <div class="aphorisms-container">
    <h3>Aphorisms</h3>
    <ul>
      <li id="1">この世は私が私になるところあなたがあなたになるところ</li>
      <li id="2">命いっぱい</li>
      <li id="3">人のことじゃないんだよじぶんのことだよ</li>
      <li id="4">あなたのこころがきれいだからなんでもきれいに見えるんだなあ</li>
      <li id="5">経験してはじめて身につくんだなあ</li>
      <li id="6">あなたの声を電話で聞いただけでその日一日心がなごむ理屈じゃねんだよなあ</li>
      <li id="7"">どうでもいいものはどうでもいいんだよ一番大事なことに一番大事ないのちをかけてゆくことだ</li>
      <li id="8">なんにも欲しがらぬとさが一番強い</li>
      <li id="9">あのときのあの苦しみもあのときのあの悲しみもみんな肥料になったんだなあじぶんが自分なるための</li>
      <li id="10">あたまじゃれかっているんだが</li>
      <li id="11">人間人間人間第一</li>
      <li id="12">本当のことがいちばんいい</li>
      <li id="13">しあれせはいつも自分のこころが決める</li>
      <li id="14">今が大事</li>
      <li id="15">その時自分ならばどうする</li>

    </ul>
  </div>
  <script src="js/three.js"></script>
  <script src="js/OrbitControls.js"></script>
  <script>
    let currentAphorism = '2';
    let renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);
    let camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 500);
    camera.position.set(0, 0, 100);
    camera.lookAt(0, 0, 0);
    let controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.update();
    let scene = new THREE.Scene();

    let random = (min, max) => {
      return Math.random() * (+max - +min) + +min; 
    }

    let generateLifeCubes = (count) => {
      for (let j = 0; j < count; j++) {
        const lifeCubes = new THREE.Group();
          for (let i = 0; i < 7; i++) {
            let geometry = new THREE.BoxGeometry(1, 1, 1);
            let material = new THREE.MeshNormalMaterial();
            let cube = new THREE.Mesh(geometry, material);
            cube.position.set(i * 2, i * i / 4, 0);
            lifeCubes.add(cube);
            lifeCubes.position.set(random(-70, 70), random(-70, 70), random(-70, 70))
          }
          console.log(lifeCubes.position)
          scene.add(lifeCubes)
        }
      }


    const lifeCubes = new THREE.Group();
    generateLifeCubes(300);
      for (let i = 0; i < 7; i++) {
        let geometry = new THREE.BoxGeometry(1, 1, 1);
        let material = new THREE.MeshNormalMaterial();
        let cube = new THREE.Mesh(geometry, material);
        cube.position.set(i * 2, i * i / 4, 0);
        lifeCubes.add(cube);
      }
    scene.add(lifeCubes);
   


    let renderAphorism = (aphorism) => {
      
      if (aphorism === '1') {
        scene.background = new THREE.Color(0x165b80)
        let geometry = new THREE.SphereGeometry(5, 20, 20);
        let material = new THREE.MeshNormalMaterial({side: THREE.BackSide });
        let cube = new THREE.Mesh(geometry, material);
        scene.add(cube);
      } else if (aphorism === '2') {
        scene.background = new THREE.Color(0xed7737)
        lifeCubes.position.set(lifeCubes.position.x - .05, lifeCubes.position.y - .05, lifeCubes.position.z)
        
        //  lifeCubes.forEach(cube => {
        //    cube.position.set(cube.position.x - .03, cube.position.y - .03, cube.position.z)
        //    scene.add(cube);

        //  })
      }
    }
    
    let animate = () => {
      requestAnimationFrame(animate);
      renderAphorism(currentAphorism);
      renderer.render(scene, camera);
    }
    animate();

    
    Array.from(document.getElementsByTagName('li')).forEach((element) => {
      element.addEventListener('click', (e) => {
        if (e.target.tagName === 'FONT') {
          const listItem = e.target.parentNode.parentNode;
          currentAphorism = listItem.id;
          scene = new THREE.Scene();
        }
      })
    })
  </script>
</body>

</html